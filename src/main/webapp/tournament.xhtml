<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk">

<h:body>
  <ui:composition template="template.xhtml">
    <ui:define name="content">
      <h2>Overview for tournament #{actionTournament.getTournamentName(param['tournamentId'])}</h2>

      <h3>Totals</h3>
      <t:dataTable id="dataresults" border="1" sortable="false"
                   style="border:1px solid black;border-collapse:collapse;"
                   value="#{actionTournament.getResultMap( param['tournamentId'] )}" var="r">
        <t:column>
          <f:facet name="header">
            <h:outputText value="Broker" />
          </f:facet>
          <h:outputText value="#{r.key}" />
        </t:column>

        <t:column>
          <f:facet name="header">
            <h:outputText value="Total" />
          </f:facet>
          <h:outputText value="#{r.value}" >
            <f:convertNumber minFractionDigits="4" />
          </h:outputText><br/>
        </t:column>
      </t:dataTable>

      <h3>Games</h3>
      <t:dataTable id="datagames" border="1" sortable="false"
                   sortColumn="#{actionTournament.sortColumn}"
                   sortAscending="#{actionTournament.sortAscending}" preserveSort="true"
                   style="border:1px solid black;border-collapse:collapse;"
                   value="#{actionTournament.getGameList( param['tournamentId'] )}" var="g">
        <t:column defaultSorted="true" sortable="true">
          <f:facet name="header">
            <h:outputText value="ID" />
          </f:facet>
          <h:outputText >
            <a href="game.xhtml?gameId=#{g.gameId}">#{g.gameId}</a>
          </h:outputText>
        </t:column>

        <t:column>
          <f:facet name="header">
            <h:outputText value="Name" />
          </f:facet>
          <h:outputText value="#{g.gameName}" />
        </t:column>

        <t:column sortable="true">
          <f:facet name="header">
            <h:outputText value="Status" />
          </f:facet>
          <h:outputText value="#{g.status}" />
        </t:column>

        <t:column>
          <f:facet name="header">
            <h:outputText value="Brokers" />
          </f:facet>
          <h:panelGroup>
            <ui:repeat value="#{g.getBrokersInGame()}" var="b">
              <b>#{b.brokerName}</b><br/>
            </ui:repeat>
          </h:panelGroup>
        </t:column>

        <t:column>
          <f:facet name="header">
            <h:outputText value="Balance" />
          </f:facet>
          <h:panelGroup>
            <ui:repeat value="#{g.getBrokersInGame()}" var="b">
              <h:outputText value="#{b.getBalance(g.gameId)}" >
                <f:convertNumber minFractionDigits="6" />
              </h:outputText><br/>
            </ui:repeat>
          </h:panelGroup>
        </t:column>
      </t:dataTable>

    </ui:define>
  </ui:composition>
</h:body>
</html>