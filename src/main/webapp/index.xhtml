<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk">


<h:body>
	<ui:composition template="template.xhtml">

		<ui:define name="content">
			<h2>Welcome to the PowerTac 2012 Tournament Scheduler!</h2>

			<h4>News:</h4>
			<p>31 May 2012: Today at 12:00 UTC we will start the 2012 Power TAC qualifying
			round. Please have your agent configured and ready to run before that time. We
			will schedule 144 games, of sizes 2, 4, and 8 brokers. We expect to see six or
			more games running in parallel much of the time. </p>
			
			<p>If you have not already done so, create an account and register and configure
			your broker as shown at the
			<a href="https://github.com/powertac/powertac-server/wiki/Broker-Tournament-Login">
			Github wiki instruction page</a>. </p>
			
			
			<h4> Running Games and their Visualizers</h4>
			<h:form>
				
				<t:dataTable id="datagames" border="1" sortable="true"
					sortColumn="#{actionIndex.sortColumn}"
					sortAscending="#{actionIndex.sortAscending}" preserveSort="true"
					rowCount="#{actionIndex.rowCount}"
					style="border:1px solid black;border-collapse:collapse;text-align:center"
					value="#{actionIndex.gameList}" var="g">
					<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Game ID" />
						</f:facet>
						<!-- row record -->
    						#{g.gameId}
    				</t:column>
    				
    				<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Tournament Name" />
						</f:facet>
						<!-- row record -->
    						#{actionIndex.getTournamentNameByGame(g)}
    				</t:column>
    				
    				<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Brokers" />
						</f:facet>
						<!-- row record -->
    						#{actionIndex.getBrokersInGame(g)}
    				</t:column>

					<t:column>
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Status" />
						</f:facet>
						<!-- row record -->
    						#{g.status}    		
    				</t:column>


					<t:column>
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Start Time" />
						</f:facet>
						<!-- row record -->
    						#{g.toUTCStartTime()}    		
    				</t:column>


					<t:column>
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Max Brokers" />
						</f:facet>
						<!-- row record -->
    						#{g.maxBrokers}
    				</t:column>

					<t:column>
						<f:facet name="header">
							<h:outputText value="Visualizer Link" />
						</f:facet>
						<a href="#{g.visualizerUrl}">Visualizer</a>
					</t:column>

				</t:dataTable>
			</h:form>
			
			<h4> Complete Games and Logs</h4>
			<h:form>
				<t:dataTable id="datagames" border="1" sortable="true"
					sortColumn="#{actionIndex.sortColumn}"
					sortAscending="#{actionIndex.sortAscending}" preserveSort="true"
					rowCount="#{actionIndex.rowCount}"
					style="border:1px solid black;border-collapse:collapse;text-align:center"
					value="#{actionIndex.gameCompleteList}" var="g">
					<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Game ID" />
						</f:facet>
						<!-- row record -->
    						#{g.gameId}
    				</t:column>
    				
    				<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Tournament Name" />
						</f:facet>
						<!-- row record -->
    						#{actionIndex.getTournamentNameByGame(g)}
    				</t:column>
    				
    				<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Brokers" />
						</f:facet>
						<!-- row record -->
    						#{actionIndex.getBrokersInGame(g)}
    				</t:column>
    				
    				<t:column defaultSorted="true">
						<!-- column header -->
						<f:facet name="header">
							<h:outputText value="Logs" />
						</f:facet>
						<!-- row record -->
    						<a href="download?game=#{g.gameId}">Logs</a>
    				</t:column>
    				
    				
				</t:dataTable>

			</h:form>



		</ui:define>
	</ui:composition>
</h:body>
</html>